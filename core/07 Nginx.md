## Nginx

#### 1	什么是DNS解析域名?

​        将域名解析为相应的IP：接口。浏览器缓存获取IP->本地host文件获取IP-> 网络运营商获取IP

#### 2	什么是Nginx？

​        Nginx是一款轻量级的Web 服务器/反向代理服务器及电子邮件(IMAP/POP3)代理服务器，并在一个BSD-like 协议下发行。

#### 3	Nginx的作用？

​		反向代理，负载均衡。

#### 4	Nginx 应用场景

​       1）http服务器。Nginx是一个http服务可以独立提供http服务。可以做网页静态服务器。

​       2）虚拟主机。可以实现在一台服务器虚拟出多个网站，例如个人网站使用的虚拟机。

​       3）反向代理，负载均衡。当网站的访问量达到一定程度后，单台服务器不能满足用户的请求时，

需要用多台服务器集群可以使用nginx做反向代理。并且多台服务器可以平均分担

负载，不会应为某台服务器负载高宕机

而某台服务器闲置的情况。

​        4）nginz 中也可以配置安全管理、比如可以使用Nginx搭建API接口网关,对每个接口服务进行拦截。

---

#### 5	什么是反向代理

nginx拦截所有请求，内部实现转发，指向真实服务器地址。

请求->nginx服务器->业务服务器

---

#### 6	反向代理的作用？

隐藏真实服务器地址，提高安全性。

#### 7	说说常用Nginx的相关配置

server {
        listen       80;                                               监听端口号
        server_name www.itmayiedu.com;            拦截域名
        location / {	                                            匹配url路径地址
		proxy_passhttp://127.0.0.1:8080;        反向代理转发真实访问地址。
                index  index.html index.htm;             默认主页。
        }
}

#### 8	什么是负载均衡？

​		负载均衡主要是解决高并发，将所有请求全部提交到负载均衡器。在负载均衡器上采用负载均衡算法（轮询，权重，

ip绑定），决定具体访问哪台服务器。

目的是：减少单台服务器的压力。

#### 9	Nginx中如何配置负载均衡?

​		通过UpStream上游服务器（使用负载衡器转发到真实业务逻辑访问的服务器）；

#### 10	四层负载均衡与七层负载均衡区别

四层负载均衡：基于传输层，基于TCP和UDP协议实现负载均衡，LVS（软负载）、F5（硬件）、haproxy都支持四层负

载均衡，支持所有负载均衡功能，比如数据库。

七层负载均衡：基于应用层，基于URL或者HTTP协议实现负载均衡，Web服务器。

Nginx1.9之后，才支持四层负载均衡。

#### 11	负载均衡有那些算法

1. 轮询机制（均匀分配访问，轮流访问请求，应用场景：服务器配置都相同的情况下）。

2. 权重机制（weight），配置比例权重，权重越高访问次数就会越多，应用场景：服务器配置不相同的情况下。

3. ip绑定（ip_hash），通过nginx获取ip地址，获取ip的hash值，固定分配到某个固定的服务器，ip绑定可以解决

   session共享问题。

   默认采用轮询算法。绝大多数情况下根据服务器的配置来配置负载均衡算法。

   

   

#### 12    什么是动态负载均衡？

不用重启nginx服务器，通过nginx实时读取相关的配置文件。

#### 13	Nginx如何实现动态负载均衡？

动态获取nginx upstream 配置。（可配置化，可以灵活的扩展。）

#### 14	什么是Http协议

http协议基于TCP协议封装成超文本传输协议。

http分为请求与响应，

http协议分为请求参数和方法类型、请求头、请求体。

响应分为 响应状态、响应头、响应体等。

#### 15	TCP与UDP区别

**UDP**: 
   1是面向无连接, 将数据及源的封装成数据包中,不需要建立连接

   2每个数据报的大小在限制64k内

   3因无连接,是不可靠协议

   4不需要建立连接,速度快

**TCP**:
     1建议连接，形成传输数据的通道.（三次握手）。

​     2在连接中以字节流方式进行大数据量传输，

​     3通过三次握手完成连接,是可靠协议

​     4必须建立连接m效率会稍低

#### 16	LVS与Keepalived区别

LVS可以实现负载均衡，但是不能够进行健康检查，比如一个rs出现故障，LVS 仍然会把请求转发给故障的rs服务器，这

样就会导致请求的无效性。

keepalive 软件可以进行健康检查，而且能同时实现 LVS 的高可用性，解决 LVS 单点故障的问题，其实 keepalive 就是为 

LVS 而生的。

#### 17	Keepalived 作用

Keepalived是在LVS基础上实现心跳检测，监控服务器实现故障转移，如果服务器宕机，尝试自动回复脚本，多次尝试失

败后，发送邮件给运维人员。

#### 18	如何实现双机主从热备

后备的服务器ip后面多添加一个 backup 参数，这台服务器就会成为备份服务器。

每个服务器安装keepalived，虚拟一个VIP ，配置主从关系，当主挂了,直接走备机。

#### 19	项目发布如何不影响到正常用户访问，实现7*24小时访问?

可以两台机子互为热备，平时各自负责各自的服务。在做上线更新的时候，关闭一台服务器的tomcat后，nginx自动把流

量切换到另外一台服务的后备机子上，从而实现无缝更新，保持服务的持续性，提高服务的可靠性，

#### 20	项目发生故障宕机了，如何处理。

故障转移，心跳检测，负载均衡，报警系统

#### 21	动态网站与静态网站区别

静态网站：用户多次访问时，html源代码不会改变。

动态网站：用户多次访问时，html源代码会改变。

#### 22	动态页面静态化的作用

提高用户访问静态代码的速度，降低对后台应用访问。

#### 23	什么是动静分离架构模式

动态资源和静态资源分别部署到不同的服务器中，一般情况下静态资源部署到Nginx服务器（Nginx性能较好）中，动态资

源放置到tomcat服务器中。

#### 24 如何搭建动静分离

通过location对请求url进行匹配，将静态资源放到nginx中，动态资源转发到tomcat服务器中。

因此，动态资源转发到tomcat服务器我们就使用到了前面讲到的反向代理了。

#### 25	动静分离与前后分离区别

动静分离：动态资源和静态资源分离，分别部署到不同的服务器上。

前后分离：网站架构模式，前后端通过接口方式协调工作。前端负责web后端负责接口，最后通过rpc远程调用协调。